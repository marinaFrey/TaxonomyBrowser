<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="css/style.css">
<head>
    <title>Taxonomy Browser</title>
    <meta charset="utf-8">
    <link rel="icon" href="images/icon_site.png">
	
	<!--BOOTSTRAP-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    
    <!--D3-->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <!--<script src="http://d3js.org/d3.v4.js"></script>-->
    <script type='text/javascript' src="http://bost.ocks.org/mike/fisheye/fisheye.js?0.0.3"> </script>
    
	
    <!--VISUALIZATION FILES-->
    <script type="text/javascript" src="js/visualizations/sunburst.js"></script>
    <script type="text/javascript" src="js/visualizations/dotsVisualization.js"></script>
	<script type="text/javascript" src="js/visualizations/mapVisualization.js"></script>
    <script type="text/javascript" src="js/visualizations/selectedSpecimens.js"></script>
	<script type="text/javascript" src="js/visualizations/numberOfSelectedViz.js"></script>
	<script type="text/javascript" src="js/visualizations/parallelCoordinates.js"></script>
	<!--<script type="text/javascript" src="js/visualizations/matrixVisualization.js"></script>-->
	<!--<script type="text/javascript" src="js/visualizations/treemapVisualization.js"></script>-->
	<script type="text/javascript" src="js/visualizations/boxplotVisualization.js"></script>
    <!--<script type="text/javascript" src="js/visualizations/box.js"></script>-->
	
	<!-- DATABASE INTERFACE -->
	<script type="text/javascript" src="js/databaseInterface/characters.js"></script>
	<script type="text/javascript" src="js/databaseInterface/login.js"></script>
	<script type="text/javascript" src="js/databaseInterface/databaseInterface.js"></script>
	<script type="text/javascript" src="js/databaseInterface/ranks.js"></script>	
	<script type="text/javascript" src="js/databaseInterface/units.js"></script>	
	
	
	<!-- POPUPS -->
	<script type="text/javascript" src="js/popups/specimenPopup.js"></script>
	<script type="text/javascript" src="js/popups/taxonomyPopup.js"></script>
	<script type="text/javascript" src="js/popups/addTaxonomyPopup.js"></script>
	<script type="text/javascript" src="js/popups/addSpecimenPopup.js"></script>
	<script type="text/javascript" src="js/popups/analysisPopup.js"></script>
	<script type="text/javascript" src="js/popups/charactersManagerPopup.js"></script>
	<script type="text/javascript" src="js/popups/usersManagerPopup.js"></script>
	
	<!--OTHER-->
	<script type="text/javascript" src="js/utilities/events.js"></script>
	<script type="text/javascript" src="js/utilities/comboboxHandler.js"></script>
	<script type="text/javascript" src="js/utilities/input.js"></script>
	<script type="text/javascript" src="js/utilities/filter.js"></script>
	<script type="text/javascript" src="js/utilities/export.js"></script>
	
	<!-- TUTORIAL -->
	<script type="text/javascript" src="js/utilities/tutorial.js"></script>
	<link href="libs/introjs230/introjs.css" rel="stylesheet">
	<script type="text/javascript" src="libs/introjs230/intro.js"></script>
    <!--<link href="../assets/css/bootstrap-responsive.min.css" rel="stylesheet">-->
	
	<!-- OTHER LIBS -->
	<script type="text/javascript" src="libs/loadingBar.js"></script>
	<script type="text/javascript" src="libs/randomColor-master/randomColor.js"></script>
	
    
	
	
    
    <!--JQUERY-->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>-->
	
    <!-- MAP -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpZxJKdEeziVgiM26XP7sh51GwmtBpPBg"type="text/javascript"></script>
    <!--<script language="javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true&v=3"></script>-->
    
	<!-- TOOLTIP -->
	<link href="libs/tooltip/jquery.toolbar.css" rel="stylesheet" />
	<script src="libs/tooltip/jquery.toolbar.js"></script>
    <link rel="stylesheet" href="libs/fontAwesome/css/font-awesome.min.css">
	
	<div class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container"> 
			<div class="navbar-header">
				<a target="_blank" href="#" class="navbar-brand">Taxonomy Browser</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
				
					<li><a href="#" id="charactersManager" onClick="return makeCharactersManagerPopup();">
						<span class="glyphicon glyphicon-cog"></span>
						Characteristics Manager
					</a></li>
					
					<li><a href="#" id="usersManager" onClick="return getAllUsers();">
						<span class="fa fa-users"></span>
						Users Manager
					</a></li>
         
				 </ul>
				<ul class="nav navbar-nav navbar-right">
					
					<li><a href="#" id="loginButton" onClick="return showLoginPopup();">
						<span class="glyphicon glyphicon-log-in"></span>
						Login
					</a></li>
					
					<li class="dropdown"  id="userTab" style="display:none">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<span class="glyphicon glyphicon-user"></span>
							<span id="welcomeUserString"><strong>Welcome, Pessoa</strong></span>
							<span class="glyphicon glyphicon-chevron-down"></span>
						</a>
						<ul class="dropdown-menu">
							<li>
								<div class="navbar-login">
									<div class="row">
										<div class="col-lg-4">
											<p class="text-center">
												<span class="glyphicon glyphicon-user icon-size"></span>
											</p>
										</div>
										<div class="col-lg-8">
											<p class="text-left" id="fullnameString"><strong>Full Name</strong></p>
											<p class="text-left small" id="emailString">Email</p>
											<p class="text-left small" id="roleString">Nivel</p>
											<p class="text-left">
												<a href="#" class="btn btn-primary btn-block btn-sm" onClick="return changeUsersInfo();">Update Information</a>
											</p>
										</div>
									</div>
								</div>
							</li>
							<li class="divider navbar-login-session-bg"></li>
							<li>
								<div class="navbar-login navbar-login-session">
									<div class="row">
										<div class="col-lg-12">
											<p>
												<a href="#" class="btn btn-danger btn-block" onClick="return logout();">Logout</a>
											</p>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</li> 
					
					<li><a href="#" id="tutorialButton" href="javascript:void(0);" onClick="startIntro();">
						<span  class="glyphicon glyphicon-info-sign"></span>
						Tour
					</a></li>
					
					<li><a href="#" id="hintsButton" href="javascript:void(0);" style="display:block" onClick="startHints();">
						<span  class="fa fa-lightbulb-o"></span>
						Show Hints
					</a></li>
					
					<li><a href="#" id="hintsButtonHide" href="javascript:void(0);" style="display:none" onClick="startHints();">
						<span  class="fa fa-lightbulb-o"></span>
						Remove Hints
					</a></li>
					
				</ul>
			</div>
		</div>
	</div>
	
	<!-- PARA O DOWNLOAD DO ARQUIVO -->
	<iframe id="my_iframe" style="display:none;"></iframe>
	
    <div id="bossDiv" style="display:block;"></div>
	
	<!-- TOOLTIPS -->
	<div id="tooltip" class="hidden">
		<p><strong><span id="name">100</span></strong></p>
		<!--<img name="infoButton" data-toggle="modal" data-target="#basicModal" src="images/info.png" width="32" height="32" border="0" alt="javascript button" onClick="return showNodeInfo();">
		<img name="addButton" data-toggle="modal" data-target="#basicModal" src="images/add.png" width="32" height="32" border="0" alt="javascript button" onClick="return addNode();">
		<img name="editButton" src="images/edit3.png" width="32" height="32" border="0" alt="javascript button" onClick="return editNode();">
		<img name="removeButton" src="images/remove.png" width="32" height="32" border="0" alt="javascript button" ><!--onClick="return removeNode();">-->
	</div>

	<!-- PROGRESS BAR -->


	<div id="toolbar-options" class="hidden">
	   <a id="tooltip_info" href="#"><i class="fa fa-info" ></i></a>
	   <a id="tooltip_add" href="#"><i class="fa fa-plus" ></i></a>
	   <a id="tooltip_edit" href="#"><i class="fa fa-pencil" ></i></a>
	</div>

	<!-- POPUP MODAL SPECIMENS-->
	<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" style="overflow-y: scroll;">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<!-- title -->
				<div class="modal-header" id="hder">
					
					<div class="col-sm-6" >
						<h4 class="modal-title" id="myModalLabel"></h4>
					</div>
					<div class="col-sm-4" ></div>
					
					<div class="col-sm-1" >
						<img name="editSpecimenButton" id="editSpecimenButton" src="images/edit3.png" width="64" height="64" border="0" alt="javascript button" title="edit specimen information">
					</div>
					<div class="col-sm-1" >
						<img name="removeSpecimenButton" id="removeSpecimenButton" src="images/trash_button.png" width="64" height="64" border="0" alt="javascript button" title="delete specimen from the database">
					</div>
					
				</div>
				<!-- info -->
				<div class="modal-body"  class="col-sm-12" id="info-body">
					<div id="info_text" class="col-sm-12" ></div>
					<ul class="nav nav-tabs" id="measures_tab_list"></ul>
					<div class="tab-content" id="measures_tab_content"></div>
				</div>
				<!-- buttons -->
				<div class="modal-footer">
					<div class="col-sm-10" ></div>
					<div class="col-sm-1" >
						<button type="button" class="btn btn-default" data-dismiss="modal" style="text-align:left">Close</button>
					</div>
					<div class="col-sm-1" >
						<button id="submitButton" type="button" class="btn btn-primary" style="display:none">Submit</button>
					</div>
					
			</div>
		</div>
	  </div>
	</div>

	<!-- POPUP MODAL ANALYSIS-->
	<div class="modal fade" id="analysisModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<!-- title -->
				<div class="modal-header" id="hder">
					<div class="col-sm-6" >
						<h4 class="modal-title" id="analysisModalLabel"></h4>
					</div>
					<div class="col-sm-2" ></div>
					<div class="col-sm-4"  id="espacoembranco" style="text-align:right;margin-top: 20px;"></div>	
				</div>
				<!-- info -->
				<div class="modal-body" id="info-body">
					<div class="row">
						<div class="col-sm-2" ></div>
						<div class="col-sm-8">
							<div id="counting_title" style="text-align:center;"></div>
							<div class="well" id="counting_text" style="text-align:center;"></div>
							
							<div id="analysis_title" style="text-align:center;"></div>
							<div id="analysis_combos" style="text-align:center;"></div>
							<div class="well" id="analysis_text" style="text-align:center;"></div>
						</div>
						<div class="col-sm-2" ></div>
					</div>
				</div>
				<!-- buttons -->
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	  </div>
	</div>

	<!-- POPUP MODAL FILTERS-->
	<div class="modal fade" id="filterModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<!-- title -->
				<div class="modal-header" id="hder">
					<h4 class="modal-title" id="filterModalLabel"></h4>
				</div>
				<!-- info -->
				<div class="modal-body" id="info-body">
					<div id="filters_info" style="text-align: center"></div>
					<div id="filters_add_button" style="text-align: left"></div>
				</div>
				<!-- buttons -->
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" onClick="applyFilters();">Apply Filters</button>
			</div>
		</div>
	  </div>
	</div>

	<!--login modal-->
	<div id="loginModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h1 class="text-center">Login</h1>
			</div>
			<div class="modal-body">
			
				<div id="loginErrorAlert" class="alert alert-danger" role="alert" style="display:none">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span class="sr-only">Error:</span>Invalid username or password.
				</div>
				
			  <form class="form col-md-12 center-block">
				<div class="form-group">
				  <input id="username" type="text" required=true class="form-control input-lg" placeholder="Username">
				</div>
				<div class="form-group">
				  <input id="password" type="password" required=true class="form-control input-lg" placeholder="Password">
				</div>
				<div class="form-group">
				  <button class="btn btn-primary btn-lg btn-block" onClick="submitLoginPopup()">Sign In</button>
				  <span class="pull-right"><a href="#" onClick="createNewUser()">Register</a></span>
				  <span><a href="#" onClick="resetUsersPassword()">Forgot Password?</a></span>
				</div>
			  </form>
		  </div>
		  <div class="modal-footer">
			  <div class="col-md-12">
			  <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
			  </div>	
		  </div>
	  </div>
	  </div>
	</div>

	<!--login configuration modal-->
	<div id="loginConfigurationModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h1 class="text-center" id="loginConfigModalTitle">User Information</h1>
			</div>
			<div class="modal-body">
			
				<div id="informationErrorAlert" class="alert alert-danger" role="alert" style="display:none">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span class="sr-only">Error:</span> <a id="informationErrorAlertText" style="color:inherit;text-decoration: none">Invalid password.</a>
				</div>
				
			  <form class="form col-md-12 center-block">
				<div class="form-group">
				  <input id="usernameConfig" type="text" required=true class="form-control input-lg" placeholder="Username">
				</div>
				<div class="form-group">
				  <input id="fullnameConfig" type="text" required=true class="form-control input-lg" placeholder="Full Name">
				</div>
				<div class="form-group">
				  <input id="emailConfig" type="email" required=true class="form-control input-lg" placeholder="Email">
				</div>
				<div class="form-group">
				  <input id="oldPasswordConfig" type="password" required=true class="form-control input-lg" placeholder="Current Password">
				</div>
				<div class="form-group">
				  <input id="passwordConfig" type="password" required=true class="form-control input-lg" placeholder="New Password">
				</div>
				<div class="form-group">
				  <input id="passwordConfirmationConfig" type="password" required=true class="form-control input-lg" placeholder="Confirm New Password">
				</div>
				<div class="form-group">
				  <button class="btn btn-primary btn-lg btn-block" id="loginConfigSubmitButton" onClick="submitChangesInUser()">Submit</button>
				</div>
			  </form>
		  </div>
		  <div class="modal-footer">
			  <div class="col-md-12">
			  <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
			  </div>	
		  </div>
	  </div>
	  </div>
	</div>
	
</head>
<body>



<script>

	var counting;
	
	// Opera 8.0+
	//var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
	// Safari 3.0+ "[object HTMLElementConstructor]" 
	//var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0 || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || safari.pushNotification);
	// Internet Explorer 6-11
	//var isIE = /*@cc_on!@*/false || !!document.documentMode;
		// Edge 20+
	//var isEdge = !isIE && !!window.StyleMedia;
		
		// Blink engine detection
	//var isBlink = (isChrome || isOpera) && !!window.CSS;

	// Firefox 1.0+
	var isFirefox = typeof InstallTrigger !== 'undefined';
	// Chrome 1+
	var isChrome = !!window.chrome && !!window.chrome.webstore;
	if(isFirefox || isChrome)
	{
		if(window.innerWidth > 1500)
		{
			$(function()
			{
			  $("#bossDiv").load("index_big.html"); 
			});
		}
		else
		{
			/*
			if(isFirefox)
				document.body.style = "-moz-transform: scale(0.9);";
			document.body.style.zoom="80%";
			$("#bossDiv").load("index_big.html"); */
			
			alert("Your resolution is lower than expected. The layout will be adjusted to be better viewed on your resolution! If you still wish to see the standard layout please use ctrl + scroll to change the window's size and press F5.");
			$(function()
			{
			  $("#bossDiv").load("index_small.html"); 
			});
			
		}
	}
	else
	{
		alert("Please open this website in Firefox or Chrome! It may not work properly otherwise.")
	}

	
	
    
</script>
</body>
</html>